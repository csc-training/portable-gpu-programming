%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
                          S u m m a r y   R e p o r t
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

Compilation
-----------
File     : axpy.F90
Compiled : 10/30/25  09:37:57
Compiler : Version 17.0.1
Ftnlx    : Version 17.0.1 
Target   : x86-64
Command  : ftn_driver.exe -hcpu=x86-trento -haccel=amdgcn-gfx90a -hnetwork=ofi
           -hdynamic -D__CRAY_X86_TRENTO -D__CRAY_AMD_GFX90A
           -D__CRAYXT_COMPUTE_LINUX_TARGET -O3 -fopenmp
           -hlist=m helper_functions.F90 axpy.F90 -oaxpy.x
           -I/opt/cray/pe/cce/17.0.1/cce-clang/x86_64/lib/clang/17/include
           -I/opt/cray/pe/cce/17.0.1/cce/x86_64/include/craylibs -I/usr/include
           -D__HIP_PLATFORM_AMD__
           -I/opt/cray/pe/mpich/8.1.29/ofi/cray/17.0/include
           -I/opt/cray/pe/libsci/24.03.0/CRAY/17.0/x86_64/include
           -I/opt/rocm-6.0.3/include -I/opt/rocm-6.0.3/include/rocprofiler
           -I/opt/rocm-6.0.3/include/roctracer
           -I/opt/cray/xpmem/2.8.2-1.0_5.1__g84a27a5.shasta/include
           -I/opt/cray/pe/dsmml/0.3.0/dsmml//include
           -L/opt/cray/pe/mpich/8.1.29/ofi/cray/17.0/lib
           -L/opt/cray/pe/mpich/8.1.29/gtl/lib
           -L/opt/cray/pe/libsci/24.03.0/CRAY/17.0/x86_64/lib
           -L/opt/rocm-6.0.3/lib -L/opt/rocm-6.0.3/lib/rocprofiler
           -L/opt/rocm-6.0.3/lib/roctracer
           -L/opt/cray/xpmem/2.8.2-1.0_5.1__g84a27a5.shasta/lib64
           -L/opt/cray/pe/dsmml/0.3.0/dsmml//lib
           -L/opt/cray/pe/cce/17.0.1/cce/x86_64/lib/pkgconfig/../ -lamdhip64
           -lxpmem -ldl -lmpi_gtl_hsa -lquadmath -lcraymp -lcrayacc_amdgpu
           -lopenacc -lmodules -lfi -lcraymath -lf -lu -lcsup -I/usr/include
           -lpthread
           -L/opt/cray/pe/cce/17.0.1/cce-clang/x86_64/lib/clang/17/lib/linux
           -L/opt/cray/pe/cce/17.0.1/cce-clang/x86_64/lib/clang/17/lib/linux/../
           ../../.. -lcsup -lm -lclang_rt.craypgo-x86_64
           -lclang_rt.builtins-x86_64 -lc -lclang_rt.builtins-x86_64
Program
  Units  : AXPY

ftnlx report
------------
Source   : axpy.F90
Date     : 10/30/2025  09:37:57


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
                          S o u r c e   L i s t i n g
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


     %%%    L o o p m a r k   L e g e n d    %%%

     Primary Loop Type        Modifiers
     ------- ---- ----        ---------
     A - Pattern matched      a - atomic memory operation
                              b - blocked
     C - Collapsed            c - conditional and/or computed
     D - Deleted               
     E - Cloned                
     F - Flat - No calls      f - fused
     G - Accelerated          g - partitioned
     I - Inlined              i - interchanged
     M - Multithreaded        m - partitioned
                              n - non-blocking remote transfer
                              p - partial
     R - Rerolling            r - unrolled
                              s - shortloop
     V - Vectorized           w - unwound

     + - More messages listed at end of listing
     ------------------------------------------


    1.              ! SPDX-FileCopyrightText: 2025 CSC - IT Center for Science Ltd. <www.csc.fi>
    2.              !
    3.              ! SPDX-License-Identifier: MIT
    4.              
    5.              ! Array size
    6.              #ifndef N
    7.              #define N 102400
    8.              #endif
    9.              
   10.              program axpy
   11.                use helper_functions
   12.                implicit none
   13.                real(8) :: alpha
   14.                real(8), dimension(N) :: x, y
   15.                integer :: i
   16.                real(8) :: frac
   17.              
   18.                print '(A, I0)', "Using N = ", N
   19.              
   20.                ! Initialization
   21.                alpha = 3.0d0
   22.    Vr2-----<   do i = 1, N
   23.    Vr2           frac = 1.0d0 / real(N - 1, kind=8)
   24.    Vr2           x(i) = real(i - 1, kind=8) * frac
   25.    Vr2           y(i) = real(i - 1, kind=8) * frac * 100.0d0
   26.    Vr2----->   end do
   27.              
   28.                ! Print input values
   29.                print '(A)', "Input:"
   30.                print '(A, F8.4)', "a = ", alpha
   31.  +             call print_array("x", x)
   32.  +             call print_array("y", y)
   33.              
   34.                ! Calculate axpy
   35.  + MG------<   !$omp target teams distribute parallel do
   36.    MG gr2--<   do i = 1, N
   37.    MG gr2        y(i) = y(i) + alpha * x(i)
   38.    MG gr2-->   end do
   39.    MG------>   !$omp end target teams distribute parallel do
   40.              
   41.                ! Print output values
   42.                print '(A)', "Output:"
   43.  +             call print_array("y", y)
   44.              
   45.              end program axpy

ftn-6005 ftn: SCALAR AXPY, File = axpy.F90, Line = 22 
  A loop starting at line 22 was unrolled 2 times.

ftn-6204 ftn: VECTOR AXPY, File = axpy.F90, Line = 22 
  A loop starting at line 22 was vectorized.

ftn-3171 ftn: IPA AXPY, File = axpy.F90, Line = 31 
  "print_array"(helper_functions.F90:45) was not inlined because it is not in the body of a loop.

ftn-3171 ftn: IPA AXPY, File = axpy.F90, Line = 32 
  "print_array"(helper_functions.F90:45) was not inlined because it is not in the body of a loop.

ftn-6405 ftn: ACCEL AXPY, File = axpy.F90, Line = 35 
  A region starting at line 35 and ending at line 39 was placed on the accelerator.

ftn-6823 ftn: THREAD AXPY, File = axpy.F90, Line = 35 
  A region starting at line 35 and ending at line 39 was multi-threaded.

ftn-6418 ftn: ACCEL AXPY, File = axpy.F90, Line = 35 
  If not already present: allocate memory and copy whole array "x" to accelerator, free at line 39 (acc_copyin).

ftn-6416 ftn: ACCEL AXPY, File = axpy.F90, Line = 35 
  If not already present: allocate memory and copy whole array "y" to accelerator, copy back at line 39 (acc_copy).

ftn-6823 ftn: THREAD AXPY, File = axpy.F90, Line = 35 
  A region starting at line 35 and ending at line 39 was multi-threaded.

ftn-6823 ftn: THREAD AXPY, File = axpy.F90, Line = 35 
  A region starting at line 35 and ending at line 39 was multi-threaded.

ftn-6005 ftn: SCALAR AXPY, File = axpy.F90, Line = 36 
  A loop starting at line 36 was unrolled 2 times.

ftn-6430 ftn: ACCEL AXPY, File = axpy.F90, Line = 36 
  A loop starting at line 36 was partitioned across the threadblocks and the 256 threads within a threadblock.

ftn-3171 ftn: IPA AXPY, File = axpy.F90, Line = 43 
  "print_array"(helper_functions.F90:45) was not inlined because it is not in the body of a loop.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
